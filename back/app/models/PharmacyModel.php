<?php
class PharmacyModel extends Model { public function all(){ $stmt=$this->pdo->query('SELECT f.*, u.nome as dono FROM farmacias f JOIN usuarios u ON u.id=f.usuario_id'); return $stmt->fetchAll(); } public function find($id){ $stmt=$this->pdo->prepare('SELECT * FROM farmacias WHERE id=?'); $stmt->execute([$id]); return $stmt->fetch(); } public function store($data){ $stmt=$this->pdo->prepare('INSERT INTO farmacias (usuario_id, nome, nif, telefone, email, endereco, latitude, longitude, horario_abertura, horario_fecho) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)'); $stmt->execute([$data['usuario_id'], $data['nome'], $data['nif'], $data['telefone'], $data['email'], $data['endereco'], $data['latitude'], $data['longitude'], $data['horario_abertura'], $data['horario_fecho']]); return $this->pdo->lastInsertId(); } }
