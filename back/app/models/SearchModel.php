<?php
class SearchModel extends Model { public function log($termo,$tipo,$farmacia_id=null){ $stmt=$this->pdo->prepare('INSERT INTO pesquisas (termo,tipo,farmacia_id) VALUES (?,?,?)'); $stmt->execute([$termo,$tipo,$farmacia_id]); } public function searchProducts($q){ $stmt=$this->pdo->prepare('SELECT p.*, f.nome as farmacia FROM produtos p JOIN farmacias f ON f.id=p.farmacia_id WHERE p.nome LIKE ? OR p.descricao LIKE ? LIMIT 100'); $like="%$q%"; $stmt->execute([$like,$like]); return $stmt->fetchAll(); } public function searchServices($q){ $stmt=$this->pdo->prepare('SELECT s.*, f.nome as farmacia FROM servicos s JOIN farmacias f ON f.id=s.farmacia_id WHERE s.nome LIKE ? OR s.descricao LIKE ? LIMIT 100'); $like="%$q%"; $stmt->execute([$like,$like]); return $stmt->fetchAll(); } }
