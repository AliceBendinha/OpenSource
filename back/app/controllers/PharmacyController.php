<?php
class PharmacyController { private $pharModel; public function __construct($pdo){ $this->pharModel=new PharmacyModel($pdo);} public function index(){ echo json_encode(['data'=>$this->pharModel->all()]); } public function show($id){ $f=$this->pharModel->find($id); if(!$f){ http_response_code(404); echo json_encode(['error'=>'FarmÃ¡cia nÃ£o encontrada']); return; } echo json_encode(['data'=>$f]); } public function store($data){ if(empty($_SESSION['user'])){ http_response_code(401); echo json_encode(['error'=>'Login necessÃ¡rio']); return; } $id=$this->pharModel->store($data); echo json_encode(['success'=>true,'id'=>$id]); } }
